/*! LifelineArts 27-10-2015 */
window.angular.module("llaapp.about",["llaapp.util"]),window.angular.module("llaapp.calender",["llaapp.util"]).directive("sectionSelectCal",["partOb",function(partOb){"use strict";function link(scope,element,attr){var callback={},id=parseInt(attr.sectionSelectCal);callback.scope=scope,callback.element=element,callback.attr=attr,callback.selectIndex=id,0===id&&(scope.$parent.selected.hasOwnProperty("init")||(scope.$parent.selected.init=scope),scope.$parent.model.content.main.hasOwnProperty("anevent")||(scope.$parent.model.content.main=scope.anevent,scope.$parent.selected.last=scope),scope.anevent.hasOwnProperty("selected")||(scope.anevent.selectedbool=!0)),id>=0?(callback.callback=function(){var par=this.scope.$parent;par.selected.last||(par.selected.last.anevent.selectedbool=!1),0!==this.selectIndex?par.selected.last=this.scope:par.selected.last=!1,this.scope.anevent.selected=!0,par.model.content.main=this.scope.anevent},partOb.subscribe("calender",scope.anevent.lla_part_slug,callback)):0>id&&(callback.callback=function(){this.scope.selected.hasOwnProperty("last")&&!this.scope.selected.last&&(this.scope.selected.last.anevent.selectedbool=!1),this.scope.selected.hasOwnProperty("init")&&(this.scope.selected.init.anevent.selectedbool=!0,this.scope.model.content.main=this.scope.selected.init.anevent),this.scope.selected.last=!1},partOb.subscribe("calender","~",callback))}return{restrict:"A",link:link}}]),window.angular.module("llaapp.contact",["reCAPTCHA","llaapp.inlineservices"]).directive("contactFormProcess",function(){"use strict";return{restrict:"A",controller:["$scope","lla_wp","reCAPTCHA",function($scope,lla_wp,reCAPTCHA){var re=lla_wp.recaptchakey;$scope.mail={},reCAPTCHA.setPublicKey(re),$scope.mailrequest={},$scope.mailrequest.showdialog=!1,$scope.mailrequest.success=!1,$scope.mailrequest.fail=!1,$scope.mailrequest.loading=!1,$scope.mailrequest.errors={},$scope.submitMail=function(){var formData;$scope.registerForm.$valid&&($scope.mailrequest.returnmessage="Your request is being process",$scope.mailrequest.loading=!0,$scope.mailrequest.showdialog=!0,$scope.mailrequest.fail=!1,$scope.mailrequest.success=!1,formData={action:"lla_simple_mail",nouce:lla_wp.nouce,"g-recaptcha-response":$scope.mail.captcha,lla_contact_name:$scope.mail.name,lla_contact_email:$scope.mail.email,lla_contact_message:$scope.mail.message},window.jQuery.ajax({type:"POST",url:lla_wp.ajax,data:formData,dataType:"json"}).fail(function(response){$scope.$apply(function(){$scope.mailrequest.showdialog=!0,$scope.mailrequest.loading=!1,$scope.mailrequest.fail=!0,$scope.mailrequest.errors=response.responseJSON.errors,reCAPTCHA.reload()})}).done(function(response){$scope.$apply(function(){$scope.mailrequest.showdialog=!0,$scope.mailrequest.loading=!1,$scope.mailrequest.returnmessage=response.message,$scope.mailrequest.success=!0,$scope.mail.captcha="",$scope.mail.email="",$scope.mail.message="",$scope.mail.name="",reCAPTCHA.reload(),$scope.registerForm.$setPristine()})}))}}]}}),window.angular.module("llaapp.gallery",["llaapp.inlineservices"]).provider("galleryPageModel",["lla_wpProvider","$qProvider","$rootScopeProvider",function(lla_wpProvider,$q,$scope){"use strict";this.hi=function(){return"hi"},this.getSection=function(section){var r;switch(section){default:r=this.model}return r},this.processState=function($stateParams){var s=this.lla_search($stateParams,"picture"),p=this.lla_search($stateParams,"extra"),a=this.model;s&&(s=this.lla_search_slug(a.content.posts,s),"full"===p?(s.animate="in",s.selectedbool=!0):s.selectedbool=!1)},this.lla_search=function(o,find){return"undefined"==typeof o||null===o?!1:o.hasOwnProperty(find)?o[find]:!1},this.lla_search_slug=function(o,find){var key,r=!1;for(key in o){var p=o[key];if(r=this.lla_search(p,"lla_part_slug"),r=r===find?p:!1,r!==!1)break}return r},this.notLoading=function(){this.model.doneload=!0},this.$get=["$q",function($q){var getData,deferred=$q.defer(),r={getSection:this.getSection,state:this.processState,lla_search:this.lla_search,lla_search_slug:this.lla_search_slug,notLoading:this.notLoading};return getData={action:"lla_get_gallery",nouce:lla_wpProvider.n},window.jQuery.ajax({type:"POST",url:lla_wpProvider.a,data:getData,dataType:"json"}).fail(function(response){r.fail={},r.fail.message=response.message,deferred.resolve(r)}).done(function(response){r.model=response,deferred.resolve(r)}),deferred}]}]).service("galleryCurId",function(){var curId=!1;return{curId:curId}}),window.angular.module("llaapp.home",["llaapp.inlineservices"]).provider("homepagemodel",function(InitialModelProvider){"use strict";if(!this.hasOwnProperty("model")){var i=InitialModelProvider.$get();this.model=i.InitialModel}this.init=function(){this.initHome(),this.initAbout(),this.initCalender(),this.initContact()},this.initHome=function(){var h=this.getSection("home");h.quote=!1},this.selectQuote=function(){var h=this.getSection("home"),quotes=h.content.Home.content.quotes,len=quotes.length-1,ran=Math.floor(Math.random()*len+1);h.quote=quotes[ran]},this.toggleQuote=function(){var h=this.getSection("home");h.quote===!1?this.selectQuote():this.initHome()},this.initAbout=function(){var a=this.getSection("about"),s=this.lla_search(a.content,"main");s===!1&&(a.content.main={}),a.content.main.selectedbool=!1},this.initCalender=function(){var m=this.model.content.Calender,k=Object.keys(m.content.events)[0],i=m.content.events[k];m.fullbool=!1,this.deselectAll(m.content.events),m.content.main=i,i.selectedbool=!0},this.initContact=function(){},this.getSection=function(section){var r;switch(section){case"home":r=this.model;break;case"about":r=this.model.content.About;break;case"calender":r=this.model.content.Calender;break;case"contact":r=this.model.content.Contact}return r},this.lla_search=function(o,find){return o.hasOwnProperty(find)?o[find]:!1},this.processState=function($stateParams){var s=this.lla_search($stateParams,"section"),p=this.lla_search($stateParams,"part"),f=this.lla_search($stateParams,"extra");if(p===!1)return null;switch(s){case"about":this.aboutState(this.getSection("about"),p,f);break;case"calender":this.calenderState(this.getSection("calender"),p,f);break;default:return null}},this.aboutState=function(a,p,f){var s;if("~"===p)this.initAbout();else{if(s=this.lla_search(a.content.posts,p),s===!1)return null;a.content.main.selectedbool=!1,this.deselectAll(a.content.posts),s.selectedbool=!0,a.content.main=s,a.content.main.animate="in",a.content.main.selectedbool=!0}},this.calenderState=function(c,p,f){var s;if("~"===p)this.initCalender();else if("full"===f)c.animate="in",c.fullbool=!0;else{if(c.fullbool=!1,s=this.lla_search(c.content.events,p),s===!1)return null;c.content.main.selectedbool=!1,this.deselectAll(c.content.events),s.selectedbool=!0,c.content.main=s}},this.deselectAll=function(ob){Object.keys(ob).forEach(function(key){this[key].selectedbool=!1,this[key].animate="out"},ob)},this.$get=function(){var r={model:this.model,getSection:this.getSection,state:this.processState,lla_search:this.lla_search,initHome:this.initHome,initAbout:this.initAbout,aboutState:this.aboutState,initCalender:this.initCalender,calenderState:this.calenderState,selectQuote:this.selectQuote,toggleQuote:this.toggleQuote,deselectAll:this.deselectAll};return r}});var llaapp=window.angular.module("llaapp",["ui.router","ngResource","ngSanitize","reCAPTCHA","llaapp.services","llaapp.home","llaapp.about","llaapp.calender","llaapp.util","llaapp.inlineservices","llaapp.contact","llaapp.gallery"]);llaapp.run(["$rootScope","$state","$stateParams","csscheck",function($rootScope,$state,$stateParams,csscheck){"use strict";$rootScope.$state=$state,$rootScope.$stateParams=$stateParams,$rootScope.$on("$stateChangeSuccess",function(event,toState,toParams,fromState,fromParams){csscheck.docheck("gallery")})}]),llaapp.config(["$urlRouterProvider","$stateProvider","$urlMatcherFactoryProvider","lla_wpProvider","homepagemodelProvider","reCAPTCHAProvider",function($urlRouterProvider,$stateProvider,$urlMatcherFactoryProvider,lla_wpProvider,homepagemodelProvider,reCAPTCHAProvider){"use strict";var re=lla_wpProvider.r;$("body").addClass("y-overflow"),$("#llainitial").addClass("fadeOut"),$("#llainitial").addClass("hidden-full"),homepagemodelProvider.init(),reCAPTCHAProvider.setPublicKey(re),reCAPTCHAProvider.setOptions({theme:"clean"});var topnavState={templateUrl:lla_wpProvider.t+"/inc/html/topnav.html",controller:["$scope","TopNavFactory",function($scope,TopNavFactory){$scope.model={},$scope.model.menuItems=TopNavFactory.get("home")}]};$urlRouterProvider.otherwise("/~/"),$stateProvider.state("homepage",{"abstract":!0,templateUrl:lla_wpProvider.t+"/inc/html/home_page.html",controller:["$scope","lla_wp","$rootScope",function($scope,lla_wp,$rootScope){$scope.template_dir=lla_wp.template_dir,$rootScope.homeLoaded=!0}]}).state("sense",{url:"/sense",templateUrl:lla_wpProvider.t+"/inc/html/sense.html",controller:["$scope","lla_wp",function($scope,lla_wp){$scope.model={},$scope.model.sense=lla_wp.sense,$scope.model.blog_title=lla_wp.blog_title,$scope.model.template_dir=lla_wp.template_dir,$scope.$on("$llagalleryLoadedImages",function(event,args){setTimeout(function(){$scope.$apply(function(){$scope.model.doneloading="out"})},1500)})}]}).state("sense.gallery",{url:"/gallery/{picture}",resolve:{galleryRes:["galleryPageModel",function(galleryPageModel){return galleryPageModel.promise}]},onEnter:["$rootScope","$stateParams","moveOnUrlGallery","galleryRes","galleryLoadResolve",function($rootScope,$stateParams,moveOnUrl,galleryPageModel,galleryLoadResolve){var jQ=window.jQuery,picture=$stateParams.picture||"sense";galleryPageModel.state($stateParams),0===jQ("#"+picture).length?galleryLoadResolve.load().then(function(){$("[scrollable]").getNiceScroll().resize(),$rootScope.$broadcast("$llagalleryLoadedImages"),moveOnUrl.execute($stateParams),galleryPageModel.notLoading()}):moveOnUrl.execute($stateParams)}],templateUrl:lla_wpProvider.t+"/inc/html/gallery_page.html",controller:["$scope","galleryRes","csscheck","lla_wp",function($scope,galleryRes,csscheck,lla_wp){$scope.model=galleryRes.getSection("main"),csscheck.docheck("gallery"),$scope.template_dir=lla_wp.template_dir}]}).state("sense.gallery.extra",{url:"/{extra}",onEnter:["$stateParams","galleryRes",function($stateParams,gallerypageModel){gallerypageModel.state($stateParams)}]}).state("homepage.stuff",{url:"/{section}/{part}",onEnter:["$stateParams","$rootScope","moveOnUrl","homepagemodel",function($stateParams,$rootScope,moveOnUrl,homepagemodel){var jQ=window.jQuery,section=$stateParams.section;homepagemodel.state($stateParams),"~"===section&&(section="home"),0===jQ("#"+section).length?$rootScope.$on("$stateChangeSuccess",function(event,toState,toParams,fromState){"^"===fromState.url&&moveOnUrl.execute(toParams)}):moveOnUrl.execute($stateParams)}],views:{topnav:topnavState,home:{templateUrl:lla_wpProvider.t+"/inc/html/home.html",controller:["$scope","homepagemodel","lla_wp","$sce",function($scope,homepagemodel,lla_wp,$sce){$scope.model=homepagemodel.getSection("home"),$scope.model.blog_title=lla_wp.blog_title,$scope.model.sense=lla_wp.sense,$scope.trustAsHtml=function(string){return string===!1&&(string=""),$sce.trustAsHtml(string)}}]},about:{templateUrl:lla_wpProvider.t+"/inc/html/about.html",controller:["$scope","homepagemodel","$sce",function($scope,homepagemodel,$sce){$scope.model=homepagemodel.getSection("about"),$scope.trustAsHtml=function(string){return $sce.trustAsHtml(string)}}]},calender:{templateUrl:lla_wpProvider.t+"/inc/html/calender.html",controller:["$scope","homepagemodel","$sce",function($scope,homepagemodel,$sce){$scope.model=homepagemodel.getSection("calender"),$scope.trustAsHtml=function(string){return $sce.trustAsHtml(string)}}]},contact:{templateUrl:lla_wpProvider.t+"/inc/html/contact.html",controller:["$scope","homepagemodel","$sce",function($scope,homepagemodel,$sce){$scope.model=homepagemodel.getSection("contact"),$scope.trustAsHtml=function(string){return $sce.trustAsHtml(string)}}]}}}).state("homepage.stuff.extra",{url:"/{extra}",onEnter:["$stateParams","$rootScope","moveOnUrl","homepagemodel",function($stateParams,$rootScope,moveOnUrl,homepagemodel){window.jQuery;homepagemodel.state($stateParams)}]})}]),angular.module("llaapp.services",["ui.router","llaapp.util"]).service("TopNavFactory",function(){"use strict";var getModel=function(name){var model;switch(name){case"home":model=[{title:"home",slug:"home/"},{title:"about",slug:"about/"},{title:"calender",slug:"calender/"},{title:"contact",slug:"contact/"}]}return model};return{get:getModel}}).service("moveOnUrl",[function(){"use strict";var execute=function($stateParams){var jQ=window.jQuery,section=$stateParams.section,offset=0;"~"===section&&(section="home"),offset=jQ("#"+section).offset().left-50,jQ("html,body").animate({scrollLeft:offset},800)};return{execute:execute}}]).service("moveOnUrlGallery",["galleryCurId",function(galleryCurId){"use strict";var execute=function($stateParams){var jQ=window.jQuery,picture=$stateParams.picture,offset=0;console.log($stateParams),galleryCurId.motion=!0,picture&&0!==jQ("#"+picture).length?(galleryCurId.curId=picture,offset=jQ("#"+picture).offset().left):(galleryCurId.curId=!1,offset=0),jQ("html,body").animate({scrollLeft:offset},{duration:800,complete:function(){console.log("finshedmove"),galleryCurId.motion=!1}}),console.log(galleryCurId)};return{execute:execute}}]).service("csscheck",function(){var docheck;return docheck=function(state){var totalwidth=0;switch(state){case"gallery":jQuery("body").removeClass("homewidth"),jQuery(".galleryimg").each(function(){totalwidth+=jQuery(this).width()});break;case"home":jQuery("body").addClass("homewidth")}},{docheck:docheck}}).service("whichAnimationEvents",function(){var ani,reinit;return reinit=function(){var t,el=document.createElement("fakeelement"),animations={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in animations)if(void 0!==el.style[t])return void 0!==typeof this.animationEvents&&(this.animationEvents=animations[t]),animations[t]},ani=reinit(),{animationEvents:ani,reInit:reinit}}).service("galleryLoadResolve",["$q","$rootScope","moveOnUrlGallery",function($q,$rootScope,moveOnUrl){return{init:function(){var def=$q.defer();return $rootScope.$on("$stateChangeSuccess",function(event,toState,toParams,fromState){"^"===fromState.url||"homepage.stuff"===fromState.name?def.resolve(fromState):def.reject(fromState)}),def.promise},load:function($stateParams){var def=$q.defer();return this.init().then(function(fromState){$rootScope.$on("$llagalleryLoadComplete",function(event){def.resolve()})}),def.promise}}}]),llaapp.namespace=function(ns){"use strict";var i,len,parts=ns.split("."),object=this;for(i=0,len=parts.length;len>i;i++)object[parts[i]]||(object[parts[i]]={}),object=object[parts[i]];return object},window.angular.module("llaapp.util",["ui.router"]).factory("_",function(){"use strict";return window._}).service("namespace",[function(){"use strict";return function(o,s){s=s.replace(/\[(\w+)\]/g,".$1"),s=s.replace(/^\./,"");for(var a=s.split(".");a.length;){var n=a.shift();n in o?o=o[n]:o[n]={}}return o}}]).directive("scrollable",[function(){"use strict";return{link:function(scope,element,attr){var nice,$=window.jQuery,op={};if(op.cursorcolor="#A4A4A4",op.cursorborder="0","x"===attr.scrollable&&(op.cursorwidth="8px",op.autohidemode="false"),nice=$(element).niceScroll(op),"x"===attr.scrollable){var _super=nice.getContentSize;nice.getContentSize=function(){var page=_super.call(nice);return page.h=nice.win.height(),page},nice.railh.addClass("lla_scrollbar_hr"),nice.railh.removeAttr("style")}}}}]).directive("llaanimate",["whichAnimationEvents",function(whichAnimationEvents){"use strict";return{scope:{llaanimateon:"=",llaanimatein:"@",llaanimateout:"@",llaanimateouthide:"@"},restrict:"A",link:function(scope,element,attr){var ani;ani=whichAnimationEvents.animationEvents,scope.$watch("llaanimateon",function(newValue,oldValue){if(newValue!==!1&&"undefined"!==newValue){switch(newValue){case"in":$(element).addClass(scope.llaanimatein);break;case"out":"jsOut"===scope.llaanimateout&&$(element).animate({opacity:0},1e3),$(element).addClass(scope.llaanimateout)}$(element).addClass("animated")}}),$(element).one(ani,function(event){var scroll=$(element).find("[scrollable]"),that=this;0!==scroll.length&&(scroll=$(element).find("[scrollable]"),scroll.each(function(i,el){$(el).getNiceScroll().hide()})),setTimeout(function(){$(this).removeClass("animated"),$(this).removeClass(scope.llaanimatein),$(this).removeClass(scope.llaanimateout),scope.$apply(function(){scope.llaanimateon=!1,"true"===scope.llaanimateouthide&&$(that).animate({width:"0px"},1e3)})},1e3),0!==scroll.length&&scroll.each(function(i,el){$(el).getNiceScroll().resize(),$(el).getNiceScroll().show()})})}}}]).directive("quotes",["homepagemodel",function(homepagemodel){"use strict";return{link:function(scope,el,attr){switch(attr.quotes){case"click":el.bind("click",function(){scope.$apply(function(){homepagemodel.selectQuote()})});break;case"off":el.bind("click",function(){scope.$apply(function(){homepagemodel.initHome()})});break;case"toggle":el.bind("click",function(){scope.$apply(function(){homepagemodel.toggleQuote()})});break;case"waypointchange":new Waypoint({element:el,handler:function(direction){scope.$apply(function(){homepagemodel.selectQuote()})},horizontal:!0})}},restrict:"A"}}]).directive("galleryway",["$state","galleryCurId",function($state,galleryCurId,galleryLoadResolve){"use strict";return{link:function(scope,el,attr){var type=attr.galleryway;switch(type){case"waypoint":scope.$on("$llagalleryLoadedImages",function(){new Waypoint({element:el,handler:function(direction){var id=$(el).attr("id");galleryCurId.motion!==!0&&(galleryCurId.curId=id)},horizontal:!0})});break;case"next":scope.$on("$llagalleryLoadedImages",function(){el.bind("click",function(){var picturetest=!1;if("undefined"!==galleryCurId.curId&&galleryCurId.curId!==!1)var next=$("#"+galleryCurId.curId).next();else var next=$(".gallery").children()[0];picturetest=$(next).attr("galleryway"),picturetest&&(next=$(next).attr("id"),$state.go("sense.gallery",{picture:next}),galleryCurId.curId=next)})});break;case"null":el.bind("click",function(){window.jQuery;galleryCurId.curId=!1,$state.go("sense.gallery",{picture:""})});break;case"nullwaypoint":new Waypoint({element:el,handler:function(direction){galleryCurId.curId=!1},horizontal:!0})}},restrict:"A"}}]).directive("loadedimages",["$rootScope",function($rootScope){"use strict";var addFun,imgwait={};return addFun=function(key,value){return key?void(imgwait[key]=value):!1},{link:function(scope,el,attr){addFun(attr.ngSrc,!1),el.bind("load",function(){var complete=!0;addFun(attr.ngSrc,!0);for(var keys=Object.keys(imgwait),i=0;i<keys.length;i++){var val=imgwait[keys[i]];val===!1&&(complete=!1)}complete===!0&&scope.$emit("$llagalleryLoadComplete",imgwait)})}}}]);